<?php
   class Conv extends CI_Controller{
      protected $randcor;
      protected $bdb ;
      public function __construct(){
         parent::__construct() ;
         $this->load->helper("asetjalan") ;
         $this->load->model("load_m");
         $this->bdb     = $this->load_m ;
         $this->randcor =  '[{"lat":"-8.18002","lng":"112.62383"},{"lat":"-8.16961","lng":"112.62042"},{"lat":"-8.17571","lng":"112.62052"},{"lat":"-8.17360","lng":"112.62386"},{"lat":"-8.17511","lng":"112.61314"},{"lat":"-8.16761","lng":"112.61608"},{"lat":"-8.16898","lng":"112.61305"},{"lat":"-8.16541","lng":"112.61796"},{"lat":"-8.17553","lng":"112.61730"},{"lat":"-8.17407","lng":"112.62777"},{"lat":"-8.16423","lng":"112.63076"},{"lat":"-8.17155","lng":"112.62605"},{"lat":"-8.17066","lng":"112.61880"},{"lat":"-8.16131","lng":"112.61937"},{"lat":"-8.16909","lng":"112.61637"},{"lat":"-8.17767","lng":"112.61560"},{"lat":"-8.17456","lng":"112.61331"},{"lat":"-8.17822","lng":"112.61253"},{"lat":"-8.17510","lng":"112.61198"},{"lat":"-8.17172","lng":"112.61702"},{"lat":"-8.16132","lng":"112.61769"},{"lat":"-8.17143","lng":"112.61264"},{"lat":"-8.16825","lng":"112.60630"},{"lat":"-8.17238","lng":"112.61912"},{"lat":"-8.17631","lng":"112.61559"},{"lat":"-8.17307","lng":"112.61151"},{"lat":"-8.15859","lng":"112.61325"},{"lat":"-8.17018","lng":"112.60975"},{"lat":"-8.16650","lng":"112.60645"},{"lat":"-8.17764","lng":"112.61137"},{"lat":"-8.16798","lng":"112.62792"},{"lat":"-8.17330","lng":"112.62441"},{"lat":"-8.16621","lng":"112.63138"},{"lat":"-8.17371","lng":"112.62826"},{"lat":"-8.17600","lng":"112.63013"},{"lat":"-8.17162","lng":"112.62327"},{"lat":"-8.17786","lng":"112.62811"},{"lat":"-8.17888","lng":"112.62227"},{"lat":"-8.15798","lng":"112.61297"},{"lat":"-8.15712","lng":"112.62481"},{"lat":"-8.16596","lng":"112.60802"},{"lat":"-8.17103","lng":"112.62453"},{"lat":"-8.16772","lng":"112.61968"},{"lat":"-8.17229","lng":"112.63175"},{"lat":"-8.17014","lng":"112.62363"},{"lat":"-8.16504","lng":"112.62241"},{"lat":"-8.16966","lng":"112.60772"},{"lat":"-8.16508","lng":"112.61238"},{"lat":"-8.17616","lng":"112.60888"},{"lat":"-8.17042","lng":"112.62462"},{"lat":"-8.17053","lng":"112.61589"},{"lat":"-8.17736","lng":"112.61512"},{"lat":"-8.17761","lng":"112.62962"},{"lat":"-8.16518","lng":"112.61840"},{"lat":"-8.17560","lng":"112.61035"},{"lat":"-8.18199","lng":"112.61605"},{"lat":"-8.16663","lng":"112.61038"},{"lat":"-8.17480","lng":"112.61335"},{"lat":"-8.18019","lng":"112.62306"},{"lat":"-8.16996","lng":"112.63054"},{"lat":"-8.16196","lng":"112.61175"},{"lat":"-8.16967","lng":"112.60680"},{"lat":"-8.17733","lng":"112.62417"},{"lat":"-8.17856","lng":"112.61071"},{"lat":"-8.16232","lng":"112.60874"},{"lat":"-8.17165","lng":"112.63033"},{"lat":"-8.17276","lng":"112.62687"},{"lat":"-8.15713","lng":"112.62132"},{"lat":"-8.16056","lng":"112.62330"},{"lat":"-8.16916","lng":"112.62810"},{"lat":"-8.16145","lng":"112.60934"},{"lat":"-8.17945","lng":"112.61408"},{"lat":"-8.18181","lng":"112.62196"},{"lat":"-8.16084","lng":"112.62159"},{"lat":"-8.17088","lng":"112.63161"},{"lat":"-8.17630","lng":"112.61950"},{"lat":"-8.17113","lng":"112.61827"},{"lat":"-8.17242","lng":"112.62761"},{"lat":"-8.17534","lng":"112.62980"},{"lat":"-8.15695","lng":"112.62250"},{"lat":"-8.16412","lng":"112.61970"},{"lat":"-8.17206","lng":"112.62633"},{"lat":"-8.17393","lng":"112.61622"},{"lat":"-8.17049","lng":"112.62969"},{"lat":"-8.17917","lng":"112.61174"},{"lat":"-8.17011","lng":"112.63217"},{"lat":"-8.17690","lng":"112.61885"},{"lat":"-8.18047","lng":"112.62174"},{"lat":"-8.17842","lng":"112.62756"},{"lat":"-8.17381","lng":"112.61858"},{"lat":"-8.17381","lng":"112.63025"},{"lat":"-8.17180","lng":"112.61933"},{"lat":"-8.17532","lng":"112.62431"},{"lat":"-8.16254","lng":"112.62863"},{"lat":"-8.18237","lng":"112.62072"},{"lat":"-8.16869","lng":"112.63261"},{"lat":"-8.16433","lng":"112.60832"},{"lat":"-8.16361","lng":"112.60925"},{"lat":"-8.16953","lng":"112.62991"},{"lat":"-8.17327","lng":"112.62760"},{"lat":"-8.16648","lng":"112.61037"},{"lat":"-8.18219","lng":"112.62169"},{"lat":"-8.16999","lng":"112.61671"},{"lat":"-8.16933","lng":"112.61237"},{"lat":"-8.17075","lng":"112.63053"},{"lat":"-8.18029","lng":"112.62624"},{"lat":"-8.17112","lng":"112.62082"},{"lat":"-8.18084","lng":"112.61483"},{"lat":"-8.16133","lng":"112.62764"},{"lat":"-8.18086","lng":"112.61348"},{"lat":"-8.15825","lng":"112.61555"},{"lat":"-8.16504","lng":"112.62148"},{"lat":"-8.16443","lng":"112.61994"},{"lat":"-8.17254","lng":"112.63238"},{"lat":"-8.17347","lng":"112.61264"},{"lat":"-8.17372","lng":"112.61057"},{"lat":"-8.16427","lng":"112.63021"},{"lat":"-8.17388","lng":"112.61858"},{"lat":"-8.17406","lng":"112.62869"},{"lat":"-8.17302","lng":"112.62961"},{"lat":"-8.16317","lng":"112.61239"},{"lat":"-8.16614","lng":"112.60714"},{"lat":"-8.16783","lng":"112.62290"},{"lat":"-8.16738","lng":"112.61073"},{"lat":"-8.16843","lng":"112.60842"},{"lat":"-8.15821","lng":"112.62667"},{"lat":"-8.15949","lng":"112.62756"},{"lat":"-8.17003","lng":"112.60678"},{"lat":"-8.16588","lng":"112.60719"},{"lat":"-8.16332","lng":"112.61225"},{"lat":"-8.17213","lng":"112.62739"},{"lat":"-8.18138","lng":"112.62306"},{"lat":"-8.16625","lng":"112.62499"},{"lat":"-8.17865","lng":"112.61682"},{"lat":"-8.16977","lng":"112.63169"},{"lat":"-8.16045","lng":"112.62940"},{"lat":"-8.17315","lng":"112.62562"},{"lat":"-8.16986","lng":"112.62611"},{"lat":"-8.18005","lng":"112.62569"},{"lat":"-8.16990","lng":"112.62488"},{"lat":"-8.17024","lng":"112.62438"},{"lat":"-8.17248","lng":"112.61024"},{"lat":"-8.17368","lng":"112.61863"},{"lat":"-8.16521","lng":"112.61832"},{"lat":"-8.16286","lng":"112.62857"},{"lat":"-8.16809","lng":"112.60909"},{"lat":"-8.16047","lng":"112.61193"},{"lat":"-8.17539","lng":"112.61524"},{"lat":"-8.16169","lng":"112.61710"},{"lat":"-8.17748","lng":"112.62943"},{"lat":"-8.15866","lng":"112.62766"},{"lat":"-8.16769","lng":"112.63117"},{"lat":"-8.16591","lng":"112.60759"},{"lat":"-8.16555","lng":"112.63006"},{"lat":"-8.17259","lng":"112.63140"},{"lat":"-8.16218","lng":"112.62893"},{"lat":"-8.17434","lng":"112.62553"},{"lat":"-8.16341","lng":"112.62043"},{"lat":"-8.17945","lng":"112.61677"},{"lat":"-8.16086","lng":"112.61297"},{"lat":"-8.17325","lng":"112.62451"},{"lat":"-8.16466","lng":"112.62784"},{"lat":"-8.16045","lng":"112.61369"},{"lat":"-8.16747","lng":"112.62816"},{"lat":"-8.17930","lng":"112.62842"},{"lat":"-8.17095","lng":"112.63245"},{"lat":"-8.16558","lng":"112.61842"},{"lat":"-8.17813","lng":"112.62255"},{"lat":"-8.17659","lng":"112.62162"},{"lat":"-8.17717","lng":"112.62577"},{"lat":"-8.16505","lng":"112.62169"},{"lat":"-8.16011","lng":"112.62792"},{"lat":"-8.16079","lng":"112.61955"},{"lat":"-8.16711","lng":"112.61334"},{"lat":"-8.16832","lng":"112.62855"},{"lat":"-8.17667","lng":"112.61447"},{"lat":"-8.17936","lng":"112.62350"},{"lat":"-8.17112","lng":"112.60786"},{"lat":"-8.17426","lng":"112.63137"},{"lat":"-8.16659","lng":"112.61585"},{"lat":"-8.17026","lng":"112.62511"},{"lat":"-8.16812","lng":"112.62205"},{"lat":"-8.17734","lng":"112.61730"},{"lat":"-8.15807","lng":"112.62331"},{"lat":"-8.16032","lng":"112.62511"},{"lat":"-8.17723","lng":"112.62247"},{"lat":"-8.16213","lng":"112.62222"},{"lat":"-8.16793","lng":"112.62760"},{"lat":"-8.17882","lng":"112.61146"},{"lat":"-8.16984","lng":"112.63069"},{"lat":"-8.16198","lng":"112.61051"},{"lat":"-8.17874","lng":"112.62740"},{"lat":"-8.16486","lng":"112.62206"},{"lat":"-8.17361","lng":"112.61590"},{"lat":"-8.17706","lng":"112.61688"},{"lat":"-8.15870","lng":"112.62539"},{"lat":"-8.17139","lng":"112.61351"},{"lat":"-8.16517","lng":"112.62007"},{"lat":"-8.16732","lng":"112.61173"},{"lat":"-8.16854","lng":"112.60719"},{"lat":"-8.17466","lng":"112.60954"},{"lat":"-8.16387","lng":"112.62254"},{"lat":"-8.17550","lng":"112.62795"},{"lat":"-8.17357","lng":"112.61059"},{"lat":"-8.16063","lng":"112.61975"},{"lat":"-8.16378","lng":"112.61921"},{"lat":"-8.17689","lng":"112.61278"},{"lat":"-8.17118","lng":"112.60940"},{"lat":"-8.17031","lng":"112.62457"},{"lat":"-8.17871","lng":"112.61230"},{"lat":"-8.15848","lng":"112.61196"},{"lat":"-8.16494","lng":"112.62447"},{"lat":"-8.16729","lng":"112.61759"},{"lat":"-8.16690","lng":"112.61338"},{"lat":"-8.16763","lng":"112.61681"},{"lat":"-8.18072","lng":"112.62307"},{"lat":"-8.17914","lng":"112.62697"},{"lat":"-8.15604","lng":"112.61918"},{"lat":"-8.16990","lng":"112.62923"},{"lat":"-8.17298","lng":"112.62569"},{"lat":"-8.15588","lng":"112.61909"},{"lat":"-8.16828","lng":"112.61506"},{"lat":"-8.16816","lng":"112.63088"},{"lat":"-8.17668","lng":"112.62572"},{"lat":"-8.16461","lng":"112.62525"},{"lat":"-8.16720","lng":"112.60974"},{"lat":"-8.16865","lng":"112.62695"},{"lat":"-8.17114","lng":"112.62966"},{"lat":"-8.17115","lng":"112.60633"},{"lat":"-8.17960","lng":"112.61929"},{"lat":"-8.17032","lng":"112.60659"},{"lat":"-8.16290","lng":"112.63001"},{"lat":"-8.16653","lng":"112.62987"},{"lat":"-8.16855","lng":"112.61275"},{"lat":"-8.16150","lng":"112.62229"},{"lat":"-8.17044","lng":"112.62131"},{"lat":"-8.17104","lng":"112.62722"},{"lat":"-8.16662","lng":"112.62285"},{"lat":"-8.18051","lng":"112.62043"},{"lat":"-8.17396","lng":"112.60844"},{"lat":"-8.16808","lng":"112.63274"},{"lat":"-8.16911","lng":"112.62519"},{"lat":"-8.17292","lng":"112.62008"},{"lat":"-8.16042","lng":"112.61081"},{"lat":"-8.17997","lng":"112.62339"},{"lat":"-8.16974","lng":"112.62331"},{"lat":"-8.17782","lng":"112.61444"},{"lat":"-8.16237","lng":"112.61916"},{"lat":"-8.15906","lng":"112.61595"},{"lat":"-8.17076","lng":"112.61061"},{"lat":"-8.17461","lng":"112.62610"},{"lat":"-8.16369","lng":"112.61972"},{"lat":"-8.17552","lng":"112.62105"},{"lat":"-8.17361","lng":"112.62534"},{"lat":"-8.16892","lng":"112.61998"},{"lat":"-8.17297","lng":"112.60729"},{"lat":"-8.16590","lng":"112.60997"},{"lat":"-8.17204","lng":"112.60994"},{"lat":"-8.18106","lng":"112.61823"},{"lat":"-8.17457","lng":"112.62735"},{"lat":"-8.16915","lng":"112.62764"},{"lat":"-8.16705","lng":"112.61549"},{"lat":"-8.17066","lng":"112.61381"},{"lat":"-8.17756","lng":"112.61868"},{"lat":"-8.17582","lng":"112.62789"},{"lat":"-8.16315","lng":"112.62839"},{"lat":"-8.17262","lng":"112.61423"},{"lat":"-8.16598","lng":"112.62159"},{"lat":"-8.16127","lng":"112.61022"},{"lat":"-8.17614","lng":"112.60859"},{"lat":"-8.18135","lng":"112.61656"},{"lat":"-8.17321","lng":"112.61536"},{"lat":"-8.16724","lng":"112.62604"},{"lat":"-8.17809","lng":"112.61313"},{"lat":"-8.16985","lng":"112.61380"},{"lat":"-8.16886","lng":"112.63120"},{"lat":"-8.16894","lng":"112.61252"},{"lat":"-8.16452","lng":"112.62476"},{"lat":"-8.15739","lng":"112.61917"},{"lat":"-8.16200","lng":"112.61522"},{"lat":"-8.17305","lng":"112.62318"},{"lat":"-8.16697","lng":"112.62858"},{"lat":"-8.15827","lng":"112.61524"},{"lat":"-8.18004","lng":"112.62067"},{"lat":"-8.15814","lng":"112.61408"},{"lat":"-8.17387","lng":"112.62340"},{"lat":"-8.17310","lng":"112.63133"},{"lat":"-8.17667","lng":"112.62310"},{"lat":"-8.17408","lng":"112.60796"},{"lat":"-8.16372","lng":"112.61998"},{"lat":"-8.16248","lng":"112.62698"},{"lat":"-8.16886","lng":"112.62510"},{"lat":"-8.16321","lng":"112.61043"},{"lat":"-8.17046","lng":"112.62766"},{"lat":"-8.17249","lng":"112.60926"},{"lat":"-8.16596","lng":"112.62704"},{"lat":"-8.15705","lng":"112.61412"},{"lat":"-8.17514","lng":"112.61784"},{"lat":"-8.17574","lng":"112.62002"},{"lat":"-8.18271","lng":"112.61993"},{"lat":"-7.85009","lng":"112.68076"},{"lat":"-7.84970","lng":"112.69770"},{"lat":"-7.86418","lng":"112.68763"},{"lat":"-7.84708","lng":"112.69614"},{"lat":"-7.85026","lng":"112.69622"},{"lat":"-7.86616","lng":"112.69129"},{"lat":"-7.86972","lng":"112.69025"},{"lat":"-7.86520","lng":"112.68864"},{"lat":"-7.85315","lng":"112.69029"},{"lat":"-7.86376","lng":"112.68637"},{"lat":"-7.85723","lng":"112.69157"},{"lat":"-7.86059","lng":"112.68069"},{"lat":"-7.85310","lng":"112.68004"},{"lat":"-7.85456","lng":"112.68180"},{"lat":"-7.85205","lng":"112.68544"},{"lat":"-7.85623","lng":"112.67635"},{"lat":"-7.84904","lng":"112.68436"},{"lat":"-7.85858","lng":"112.69675"},{"lat":"-7.85223","lng":"112.69910"},{"lat":"-7.84457","lng":"112.69077"},{"lat":"-7.85483","lng":"112.68975"},{"lat":"-7.84980","lng":"112.68437"},{"lat":"-7.85851","lng":"112.69893"},{"lat":"-7.85646","lng":"112.69865"},{"lat":"-7.84729","lng":"112.68687"},{"lat":"-7.85481","lng":"112.69999"},{"lat":"-7.85591","lng":"112.68524"},{"lat":"-7.85643","lng":"112.67677"},{"lat":"-7.86472","lng":"112.67936"},{"lat":"-7.85006","lng":"112.69500"},{"lat":"-7.85994","lng":"112.68508"},{"lat":"-7.86366","lng":"112.68776"},{"lat":"-7.85882","lng":"112.68077"},{"lat":"-7.85913","lng":"112.68552"},{"lat":"-7.85423","lng":"112.69007"},{"lat":"-7.86579","lng":"112.69060"},{"lat":"-7.85585","lng":"112.67569"},{"lat":"-7.85806","lng":"112.70183"},{"lat":"-7.85212","lng":"112.68293"},{"lat":"-7.86451","lng":"112.68166"},{"lat":"-7.86637","lng":"112.69757"},{"lat":"-7.84818","lng":"112.68204"},{"lat":"-7.85541","lng":"112.69818"},{"lat":"-7.86101","lng":"112.69386"},{"lat":"-7.85987","lng":"112.67838"},{"lat":"-7.85867","lng":"112.69330"},{"lat":"-7.84973","lng":"112.68211"},{"lat":"-7.85876","lng":"112.67657"},{"lat":"-7.85375","lng":"112.69353"},{"lat":"-7.85963","lng":"112.69092"},{"lat":"-7.86129","lng":"112.69609"},{"lat":"-7.85279","lng":"112.68572"},{"lat":"-7.84809","lng":"112.68932"},{"lat":"-7.85734","lng":"112.67646"},{"lat":"-7.85624","lng":"112.69749"},{"lat":"-7.85363","lng":"112.68743"},{"lat":"-7.86832","lng":"112.68605"},{"lat":"-7.87000","lng":"112.68665"},{"lat":"-7.85623","lng":"112.68077"},{"lat":"-7.85527","lng":"112.69272"},{"lat":"-7.85786","lng":"112.69957"},{"lat":"-7.86180","lng":"112.67776"},{"lat":"-7.87112","lng":"112.68884"},{"lat":"-7.86493","lng":"112.68586"},{"lat":"-7.85107","lng":"112.68366"},{"lat":"-7.85451","lng":"112.67724"},{"lat":"-7.85016","lng":"112.68270"},{"lat":"-7.86176","lng":"112.69376"},{"lat":"-7.85836","lng":"112.68170"},{"lat":"-7.85080","lng":"112.69444"},{"lat":"-7.84562","lng":"112.68829"},{"lat":"-7.85185","lng":"112.68314"},{"lat":"-7.86110","lng":"112.69649"},{"lat":"-7.86477","lng":"112.67760"},{"lat":"-7.85723","lng":"112.69297"},{"lat":"-7.86857","lng":"112.68898"},{"lat":"-7.84664","lng":"112.69114"},{"lat":"-7.86806","lng":"112.69505"},{"lat":"-7.86574","lng":"112.68441"},{"lat":"-7.85108","lng":"112.67860"},{"lat":"-7.86613","lng":"112.69922"},{"lat":"-7.86132","lng":"112.69946"},{"lat":"-7.85052","lng":"112.69646"},{"lat":"-7.85594","lng":"112.68583"},{"lat":"-7.85766","lng":"112.70217"},{"lat":"-7.86840","lng":"112.69408"},{"lat":"-7.85287","lng":"112.70105"},{"lat":"-7.86203","lng":"112.69903"},{"lat":"-7.85860","lng":"112.69718"},{"lat":"-7.85916","lng":"112.69506"},{"lat":"-7.84992","lng":"112.68962"},{"lat":"-7.86380","lng":"112.68851"},{"lat":"-7.85796","lng":"112.67945"},{"lat":"-7.85371","lng":"112.68445"},{"lat":"-7.85122","lng":"112.67938"},{"lat":"-7.86081","lng":"112.68971"},{"lat":"-7.86082","lng":"112.67672"},{"lat":"-7.86279","lng":"112.68799"},{"lat":"-7.85339","lng":"112.68787"},{"lat":"-7.85002","lng":"112.69406"},{"lat":"-7.86825","lng":"112.68639"},{"lat":"-7.86537","lng":"112.69885"},{"lat":"-7.86271","lng":"112.68046"},{"lat":"-7.85853","lng":"112.69696"},{"lat":"-7.84874","lng":"112.69513"},{"lat":"-7.85410","lng":"112.69891"},{"lat":"-7.85743","lng":"112.69193"},{"lat":"-7.86182","lng":"112.68795"},{"lat":"-7.85825","lng":"112.70225"},{"lat":"-7.86009","lng":"112.68180"},{"lat":"-7.86303","lng":"112.68011"},{"lat":"-7.85730","lng":"112.68511"},{"lat":"-7.84884","lng":"112.69041"},{"lat":"-7.84647","lng":"112.68706"},{"lat":"-7.84908","lng":"112.67932"},{"lat":"-7.86034","lng":"112.70167"},{"lat":"-7.86903","lng":"112.68725"},{"lat":"-7.84898","lng":"112.69158"},{"lat":"-7.85274","lng":"112.69011"},{"lat":"-7.86209","lng":"112.68046"},{"lat":"-7.86164","lng":"112.69872"},{"lat":"-7.86668","lng":"112.69630"},{"lat":"-7.86347","lng":"112.69030"},{"lat":"-7.85024","lng":"112.68586"},{"lat":"-7.86315","lng":"112.68763"},{"lat":"-7.86135","lng":"112.67772"},{"lat":"-7.84543","lng":"112.68767"},{"lat":"-7.86215","lng":"112.69928"},{"lat":"-7.85812","lng":"112.68187"},{"lat":"-7.86821","lng":"112.68933"},{"lat":"-7.86902","lng":"112.69532"},{"lat":"-7.85763","lng":"112.68825"},{"lat":"-7.86381","lng":"112.69346"},{"lat":"-7.85742","lng":"112.69972"},{"lat":"-7.85391","lng":"112.67857"},{"lat":"-7.85171","lng":"112.69948"},{"lat":"-7.86010","lng":"112.68892"},{"lat":"-7.84798","lng":"112.68560"},{"lat":"-7.86447","lng":"112.69788"},{"lat":"-7.86527","lng":"112.67876"},{"lat":"-7.85014","lng":"112.68450"},{"lat":"-7.85859","lng":"112.69057"},{"lat":"-7.86288","lng":"112.69716"},{"lat":"-7.85119","lng":"112.69283"},{"lat":"-7.85519","lng":"112.68807"},{"lat":"-7.84654","lng":"112.69564"},{"lat":"-7.84542","lng":"112.68489"},{"lat":"-7.85815","lng":"112.68237"},{"lat":"-7.85422","lng":"112.68664"},{"lat":"-7.85749","lng":"112.67800"},{"lat":"-7.86139","lng":"112.70074"},{"lat":"-7.86589","lng":"112.69589"},{"lat":"-7.84833","lng":"112.69329"},{"lat":"-7.85887","lng":"112.69415"},{"lat":"-7.85285","lng":"112.67908"},{"lat":"-7.84852","lng":"112.68746"},{"lat":"-7.86778","lng":"112.68211"},{"lat":"-7.86956","lng":"112.69403"},{"lat":"-7.85315","lng":"112.67690"},{"lat":"-7.86093","lng":"112.69270"},{"lat":"-7.84962","lng":"112.68250"},{"lat":"-7.84681","lng":"112.68895"},{"lat":"-7.84752","lng":"112.69023"},{"lat":"-7.85900","lng":"112.67847"},{"lat":"-7.85197","lng":"112.67757"},{"lat":"-7.85341","lng":"112.68901"},{"lat":"-7.86835","lng":"112.68462"},{"lat":"-7.85299","lng":"112.68477"},{"lat":"-7.85081","lng":"112.69830"},{"lat":"-7.86498","lng":"112.68517"},{"lat":"-7.86231","lng":"112.68528"},{"lat":"-7.84888","lng":"112.69774"},{"lat":"-7.85751","lng":"112.68345"},{"lat":"-7.84686","lng":"112.68755"},{"lat":"-7.84760","lng":"112.69488"},{"lat":"-7.86162","lng":"112.69178"},{"lat":"-7.85373","lng":"112.68481"},{"lat":"-7.85376","lng":"112.70121"},{"lat":"-7.86089","lng":"112.68588"},{"lat":"-7.85772","lng":"112.67809"},{"lat":"-7.84896","lng":"112.68778"},{"lat":"-7.86909","lng":"112.69396"},{"lat":"-7.86975","lng":"112.69177"},{"lat":"-7.86347","lng":"112.68022"},{"lat":"-7.85917","lng":"112.68277"},{"lat":"-7.86860","lng":"112.69378"},{"lat":"-7.85410","lng":"112.67948"},{"lat":"-7.86278","lng":"112.68058"},{"lat":"-7.86799","lng":"112.69435"},{"lat":"-7.84824","lng":"112.68505"},{"lat":"-7.85231","lng":"112.68070"},{"lat":"-7.85617","lng":"112.68152"},{"lat":"-7.86093","lng":"112.67791"},{"lat":"-7.85505","lng":"112.69927"},{"lat":"-7.86258","lng":"112.67846"},{"lat":"-7.86560","lng":"112.68673"},{"lat":"-7.85885","lng":"112.69141"},{"lat":"-7.85860","lng":"112.69643"},{"lat":"-7.85585","lng":"112.67634"},{"lat":"-7.85558","lng":"112.68270"},{"lat":"-7.84852","lng":"112.69207"},{"lat":"-7.86330","lng":"112.69616"},{"lat":"-7.86435","lng":"112.68477"},{"lat":"-7.85445","lng":"112.68068"},{"lat":"-7.85992","lng":"112.69968"},{"lat":"-7.87089","lng":"112.69129"},{"lat":"-7.84568","lng":"112.69013"},{"lat":"-7.86751","lng":"112.69180"},{"lat":"-7.86067","lng":"112.69197"},{"lat":"-7.85056","lng":"112.68630"},{"lat":"-7.84895","lng":"112.69113"},{"lat":"-7.85900","lng":"112.69145"},{"lat":"-7.85983","lng":"112.69248"},{"lat":"-7.86459","lng":"112.69508"},{"lat":"-7.86937","lng":"112.68843"},{"lat":"-7.85827","lng":"112.67928"},{"lat":"-7.85962","lng":"112.69397"},{"lat":"-7.85033","lng":"112.69541"},{"lat":"-7.87059","lng":"112.68828"},{"lat":"-7.86334","lng":"112.69446"},{"lat":"-7.86750","lng":"112.69443"},{"lat":"-7.84631","lng":"112.68896"},{"lat":"-7.85383","lng":"112.68994"},{"lat":"-7.85912","lng":"112.68198"},{"lat":"-7.85834","lng":"112.70149"},{"lat":"-7.86403","lng":"112.68151"},{"lat":"-7.85517","lng":"112.69314"},{"lat":"-7.86291","lng":"112.69593"},{"lat":"-7.86236","lng":"112.69052"},{"lat":"-7.85785","lng":"112.69608"},{"lat":"-7.85452","lng":"112.68758"},{"lat":"-7.86256","lng":"112.69847"},{"lat":"-7.86508","lng":"112.69308"},{"lat":"-7.85872","lng":"112.69793"},{"lat":"-7.85972","lng":"112.68540"},{"lat":"-7.86019","lng":"112.68984"},{"lat":"-7.86214","lng":"112.68514"},{"lat":"-7.85144","lng":"112.68975"},{"lat":"-7.84822","lng":"112.69178"},{"lat":"-7.85457","lng":"112.69057"},{"lat":"-7.85433","lng":"112.67968"},{"lat":"-7.84612","lng":"112.68636"},{"lat":"-7.86998","lng":"112.69232"},{"lat":"-7.86100","lng":"112.68271"},{"lat":"-7.85099","lng":"112.68955"},{"lat":"-7.85649","lng":"112.68147"},{"lat":"-7.86966","lng":"112.68773"},{"lat":"-7.85935","lng":"112.68498"},{"lat":"-7.86231","lng":"112.68985"},{"lat":"-7.85795","lng":"112.68081"},{"lat":"-7.86593","lng":"112.67880"},{"lat":"-7.84673","lng":"112.68272"},{"lat":"-7.85048","lng":"112.69595"},{"lat":"-7.86434","lng":"112.68858"},{"lat":"-7.85856","lng":"112.68771"},{"lat":"-7.85635","lng":"112.69242"},{"lat":"-7.85164","lng":"112.69451"},{"lat":"-7.86997","lng":"112.69282"},{"lat":"-7.86405","lng":"112.68733"},{"lat":"-7.85797","lng":"112.69494"},{"lat":"-7.84501","lng":"112.68843"},{"lat":"-7.85957","lng":"112.68037"},{"lat":"-7.84955","lng":"112.69149"},{"lat":"-7.86172","lng":"112.69688"},{"lat":"-7.84734","lng":"112.68796"},{"lat":"-7.85913","lng":"112.70009"},{"lat":"-7.85791","lng":"112.69920"},{"lat":"-7.84824","lng":"112.68984"},{"lat":"-7.86612","lng":"112.67961"},{"lat":"-7.85905","lng":"112.68322"},{"lat":"-7.86724","lng":"112.68627"},{"lat":"-7.84491","lng":"112.68668"},{"lat":"-7.86897","lng":"112.69482"},{"lat":"-7.86168","lng":"112.68007"},{"lat":"-7.85313","lng":"112.69217"},{"lat":"-7.85008","lng":"112.69922"},{"lat":"-7.86455","lng":"112.68706"},{"lat":"-7.85364","lng":"112.67731"},{"lat":"-7.84892","lng":"112.69173"},{"lat":"-7.84751","lng":"112.68614"},{"lat":"-7.84759","lng":"112.69468"},{"lat":"-7.86192","lng":"112.67740"},{"lat":"-7.85106","lng":"112.67761"},{"lat":"-7.85733","lng":"112.68858"},{"lat":"-7.86566","lng":"112.69829"},{"lat":"-7.85900","lng":"112.69908"},{"lat":"-7.85757","lng":"112.68681"},{"lat":"-7.84876","lng":"112.68930"},{"lat":"-7.85145","lng":"112.69950"},{"lat":"-7.85095","lng":"112.69044"},{"lat":"-7.85746","lng":"112.68412"},{"lat":"-7.86636","lng":"112.69149"},{"lat":"-7.85592","lng":"112.68984"},{"lat":"-7.86543","lng":"112.68983"},{"lat":"-7.86306","lng":"112.67969"},{"lat":"-7.85567","lng":"112.69304"},{"lat":"-7.86244","lng":"112.69430"},{"lat":"-7.86130","lng":"112.70051"},{"lat":"-7.84831","lng":"112.68993"},{"lat":"-7.85700","lng":"112.67747"}]' ;
         $this->randcor = json_decode($this->randcor, true) ;
      }

      public function index(){
         $n    = 300 ;
         $this->conv($n, 355) ;
      }

      private function parsekoor($c){
         $cc   = $c ;
         $c    = str_replace(array("S-","E-"), "", $c) ;
         $l    = strlen($c);
         //ambil dari belakang 3 2 dan sisa
         $min  = "" ;
         if(strpos($cc, "E") > -1){
            $arr  = array(substr($c, 0 ,3) ,substr($c, 3 ,2), substr($c, $l-2 ,3)) ;
         }else{
            $min  = "-" ;
            $arr  = array(substr($c, 0 ,2) ,substr($c, 2 ,2), substr($c, $l-2 ,3)) ;
         }
         foreach ($arr as $key => $value) {
            if($key == 2){
               $arr[$key] = floatval(substr($value,0,1).".".substr($value,1,2)) ;
            }else{
               $arr[$key] = intval($value) ;
            }
         }

         //hitung
         return $min . ($arr[0] + ((($arr[1]*60)+($arr[2]))/3600) );
      }

      private function setgeo($u,$koor){
         $geo  = array() ;
         $l    = strlen(trim($koor)) ;
         if($l == 1 || $l == 0){ //kosong
            if($u == "M"){//garis
               $k     = $this->randcor[rand(0,599)] ;
               $co    = array($k, $k) ;
               $geo  = $this->setgeo_line($co) ;
            }else{//titik
               $geo  = $this->setgeo_point($this->randcor[rand(0,599)]) ;
            }
         }else if(strpos($koor, "~~") !== FALSE){//garis
            $co   = array() ;
            foreach (explode("~~", $koor) as $key => $value) {
               $c    = explode("," , $value) ;
               $co[] = array("lat"=>$this->parsekoor($c[0]), "lng"=>$this->parsekoor($c[1])) ;
            }
            $geo  = $this->setgeo_line($co) ;
         }else{//titk
            $c    = explode("," , $koor) ;
            $co   = array("lat"=>$this->parsekoor($c[0]), "lng"=>$this->parsekoor($c[1])) ;
            $geo  = $this->setgeo_point($co) ;
         }

         return json_encode($geo) ;
      }

      private function setgeo_point($koor){
         $a = array(array("type"=>"Feature", "geometry"=>array("type"=>"Point",
                     "coordinates"=>array($koor['lng'], $koor['lat'])), "properties"=>array())) ;
         return $a ;
      }

      private function setgeo_line($koor){
         $k = array() ;
         foreach ($koor as $key => $v) {
            $k[] = array($v['lng'], $v['lat']) ;
         }
         $a = array(array("type"=>"Feature", "geometry"=>array("type"=>"LineString",
                     "coordinates"=>$k),"properties"=>array())) ;
         return $a ;
      }

      private function setjenis($u, $t, $j){
         $kd   = array($u) ;
         if(trim($t) !== "") $kd[] = $t ;
         if(trim($j) !== "") $kd[] = $j ;
         $kd   = implode(".", $kd) ;
         $c    = $this->bdb->getval("ref, kode", "ref = " . $this->bdb->escape($kd), "mst_jenis") ;
         if(empty($c)){
            $w = "tipe = 1" ;
            if($u == "M") $w .= " AND kode LIKE '03.%'" ;
            $db= $this->bdb->select("mst_jenis", "kode, ref", $w, "", "", "RAND()", "0,1") ;
            if($r= $this->bdb->getrow($db)){
               $c = $r ;
            }
         }
         return $c ;
      }

      private function conv1($s, $e){
         $sd       = 0 ;
         $sd_t     = getsumber_dana_text($sd) ;
         $y        = 2017 ;
         $tgl      = date("2017-m-d") ;
         $db       = $this->bdb->select("conv", "*") ;
         while($r  = $this->bdb->getrow($db)){
            $lokasi= $r['lokasi'] !== "" ? $r['lokasi'] : "Dimana saja" ;
            foreach (explode("/", $r['kode_jenis']) as $key => $value) {
               $jk    = rand(0,3) ;
               $pd    = rand(19203234, 100000000) ;
               $k     = rand(0,2) ;
               $u     = rand(6,24) ;
               $jenis = $this->setjenis($r['table_u'], $r['table'], $value) ;
               $kode  = $this->bdb->getincrement("Aset". $y) ;
               $kode  = array($kode, $y, $jenis['ref'], $sd_t) ;
               $kode  = implode("/", $kode) ;
               $geojs = $this->setgeo($r['table_u'], $r['koor']) ;
               $f     = "./uploads/aset/". rand(1,10) .".jpg" ;
               $f     = array(array("loc"=>$f, "url"=>$f, "name"=>"bismillah", "time"=>time())) ;
               $f     = json_encode($f) ;
               $is    = rand(2,5) ;
               $va    = array("id_supplier"=>$is, "kode"=>$kode, "kode_daerah"=>$r['kode_daerah'], "kode_ruas"=>$r['kode_ruas'],
                              "lokasi"=>$lokasi, "jalan_klas"=>$jk, "tahun"=>$y, "jumlah"=>$r['jumlah'], "dana_sumber"=>$sd,
                              "dana_pagu"=>$pd, "status_input"=>1) ;
               $this->bdb->insert("tr_aset", $va) ;
               $id    = $this->bdb->getval("id", "kode = '".$kode."'", "tr_aset") ;
               if($id !== ""){
                  $va = array("id_aset"=>$id, "kode_jenis"=>$jenis['kode'], "tipe_jenis"=>"1", "tgl"=>$tgl, "geojson"=>$geojs,
                              "kualitas"=>$k, "umur"=>$u, "foto"=>$f, "keterangan"=>$r['keterangan']) ;
                  $this->bdb->insert("tr_aset_item", $va) ;
               }
            }
         }

         if($s >= $e){
            echo("selesai") ;
         }else{
            echo("lanjut " . $s) ;
            //$this->conv($s, $e) ;
         }
      }
   }
?>
